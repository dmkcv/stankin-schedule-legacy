# API расписания занятий для Станкина, 2017 эдишн

Попытка привнести инновации, традиционно задушенная бюрократией. 
Изначально хотели, чтобы это мини-приложение стало базой для комплекса полезного - проксировать модули из журнала, новости с сайта, библиотеку и прочее вузовское. 
В итоге оно полугода успешно работало в замечательном iOS-приложении (под авторством Александра А.), но потом так никто (даже ЦИУ) и не смог достать новые версии XML-расписания из секретных подвалов секретного учебного управления. Sad, but true.

## Что умеет
- генерирует много джейсончиков из исходного XML-файла экспорта программы "Ректор-ВУЗ", которая используется для генерации "нагрузки" учебным управлением
- реализует API для клиентов, предлагающий расписание на неделю по группам/преподавателям/аудиториям, саджесты для поиска и просто словари сущностей (аудитории, кафедры, преподы и подобное)
- имеет возможность автообновлять расписание с FTP по свежести/просто по имени (изначально так и планировалась постоянная работа)
- админка для управления настройками и ревизиями расписания

## Технологии и что внутри

- PHP 7.x
- MVC, без больших фреймворков
- MySQL для постоянной базы настроек/пользователей, SQLite для переносимой базы ревизий расписания (1 ревизия - 1 база)

## Зависимости
- [godb](https://github.com/vasa-c/go-db) - библиотека для работы с БД
- [altorouter](https://github.com/dannyvankooten/AltoRouter) - собственно роутер
- [plates](https://github.com/thephpleague/plates) - шаблонизатор
- [monolog](https://github.com/Seldaek/monolog) - логи

## Запуск
- поправить конфиг (из шаблона config-dist.php)
- залить base.sql
- в админке (/admin) залить xml
- после обработки станут доступны ручки API
- документация к методам API в папке *manual*

## Скриншоты на память
<img src="https://i.imgur.com/6fCqe8l.png" height="600"/><br>
*Сама админка*

<img src="https://i.imgur.com/TN2vfO3.png" height="300"/><br>
*Логи обработки ревизии расписания*

<img src="https://i.imgur.com/TjAfnl9.png" height="400"/><br>
*Настройки автообновления и его лог*

<img src="https://i.imgur.com/lt9uTKj.jpg"  height="400"/><br>
*Как данные выглядели на стороне пользователей*